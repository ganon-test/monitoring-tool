<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ ProxmoxÁõ£Ë¶ñ„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --dark-bg: #1e293b;
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-primary: #ffffff;
            --text-secondary: #cbd5e1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #fbbf24, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        /* „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„Éº */
        .status-bar {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 15px 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 500;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success-color);
            box-shadow: 0 0 20px var(--success-color);
            animation: pulse 2s infinite;
        }

        .status-dot.offline {
            background: var(--danger-color);
            box-shadow: 0 0 20px var(--danger-color);
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }

        .refresh-btn {
            background: linear-gradient(45deg, var(--success-color), #059669);
            border: none;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .refresh-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        /* „Ç∞„É™„ÉÉ„Éâ„É¨„Ç§„Ç¢„Ç¶„Éà */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .wide-card {
            grid-column: 1 / -1;
        }

        /* „Ç´„Éº„Éâ */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-primary);
        }

        .card i {
            color: var(--warning-color);
            font-size: 1.2rem;
        }

        /* „É°„Éà„É™„ÇØ„Çπ„Ç∞„É™„ÉÉ„Éâ */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .metric {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            transition: all 0.3s ease;
        }

        .metric:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(45deg, var(--success-color), #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .metric-label {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* „Éé„Éº„Éâ„Ç∞„É™„ÉÉ„Éâ */
        .nodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .node-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 20px;
            border-left: 4px solid var(--success-color);
            transition: all 0.3s ease;
        }

        .node-card.offline {
            border-left-color: var(--danger-color);
        }

        .node-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .node-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .node-name {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .node-status {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--success-color);
            box-shadow: 0 0 15px var(--success-color);
        }

        .node-status.offline {
            background: var(--danger-color);
            box-shadow: 0 0 15px var(--danger-color);
        }

        .node-metrics {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .progress-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin: 5px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--warning-color));
            border-radius: 4px;
            transition: width 0.8s ease-in-out;
        }

        /* VM/„Ç≥„É≥„ÉÜ„Éä„É™„Çπ„Éà */
        .vm-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .vm-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .vm-item.running {
            border-left-color: var(--success-color);
        }

        .vm-item.stopped {
            border-left-color: var(--danger-color);
        }

        .vm-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateX(5px);
        }

        .vm-info h4 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .vm-details {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .vm-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .vm-status.running {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .vm-status.stopped {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        /* „ÉÅ„É£„Éº„Éà„Ç≥„É≥„ÉÜ„Éä */
        .chart-container {
            position: relative;
            height: 350px;
            margin-top: 20px;
        }

        .chart-container canvas {
            border-radius: 15px;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .status-bar {
                flex-wrap: wrap;
                gap: 15px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº */
        .vm-list::-webkit-scrollbar {
            width: 6px;
        }

        .vm-list::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .vm-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .vm-list::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        /* „Éï„ÉÉ„Çø„Éº */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <div class="header">
            <h1><i class="fas fa-server"></i> Proxmox Dashboard</h1>
            <p>„É™„Ç¢„É´„Çø„Ç§„É†Áõ£Ë¶ñ„Ç∑„Çπ„ÉÜ„É†</p>
        </div>

        <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„Éê„Éº -->
        <div class="status-bar">
            <div class="status-item">
                <div class="status-dot" id="connection-status"></div>
                <span>Êé•Á∂öÁä∂ÊÖã</span>
            </div>
            <div class="status-item">
                <i class="fas fa-clock"></i>
                <span>ÊúÄÁµÇÊõ¥Êñ∞: <span id="last-update">Ë™≠„ÅøËæº„Åø‰∏≠...</span></span>
            </div>
            <button class="refresh-btn" onclick="refreshData()">
                <i class="fas fa-sync-alt"></i>
                ÊâãÂãïÊõ¥Êñ∞
            </button>
        </div>

        <!-- „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Ç∞„É™„ÉÉ„Éâ -->
        <div class="dashboard-grid">
            <!-- „ÇØ„É©„Çπ„Çø„ÉºÊ¶ÇË¶Å -->
            <div class="card">
                <h3><i class="fas fa-sitemap"></i> „ÇØ„É©„Çπ„Çø„ÉºÊ¶ÇË¶Å</h3>
                <div class="metrics-grid">
                    <div class="metric">
                        <div class="metric-value" id="total-nodes">0</div>
                        <div class="metric-label">„Éé„Éº„ÉâÊï∞</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="total-vms">0</div>
                        <div class="metric-label">VM/CTÁ∑èÊï∞</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="running-vms">0</div>
                        <div class="metric-label">Á®ºÂÉç‰∏≠</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="cluster-uptime">99.9%</div>
                        <div class="metric-label">Á®ºÂÉçÁéá</div>
                    </div>
                </div>
            </div>

            <!-- „É™„ÇΩ„Éº„Çπ‰ΩøÁî®Áéá -->
            <div class="card">
                <h3><i class="fas fa-chart-pie"></i> „É™„ÇΩ„Éº„Çπ‰ΩøÁî®Áéá</h3>
                <div class="chart-container">
                    <canvas id="resource-chart"></canvas>
                </div>
            </div>

            <!-- „Éé„Éº„ÉâÁä∂ÊÖã -->
            <div class="card wide-card">
                <h3><i class="fas fa-server"></i> „Éé„Éº„ÉâÁä∂ÊÖã</h3>
                <div class="nodes-grid" id="nodes-container">
                    <!-- „Éé„Éº„ÉâÊÉÖÂ†±„ÅåÂãïÁöÑ„Å´ÊåøÂÖ• -->
                </div>
            </div>

            <!-- VM/„Ç≥„É≥„ÉÜ„Éä‰∏ÄË¶ß -->
            <div class="card wide-card">
                <h3><i class="fas fa-cubes"></i> VM„Éª„Ç≥„É≥„ÉÜ„Éä</h3>
                <div class="vm-list" id="vms-container">
                    <!-- VMÊÉÖÂ†±„ÅåÂãïÁöÑ„Å´ÊåøÂÖ• -->
                </div>
            </div>

            <!-- „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÂ±•Ê≠¥ -->
            <div class="card wide-card">
                <h3><i class="fas fa-chart-line"></i> „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÂ±•Ê≠¥</h3>
                <div class="chart-container">
                    <canvas id="history-chart"></canvas>
                </div>
            </div>
        </div>

        <!-- „Éï„ÉÉ„Çø„Éº -->
        <div class="footer">
            <p>Proxmox Monitor Dashboard &copy; 2025 | Real-time monitoring system</p>
        </div>
    </div>

    <script>
        // „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞
        const socket = io();
        let resourceChart = null;
        let historyChart = null;
        let latestData = null;

        // WebSocket „Ç§„Éô„É≥„Éà„Éè„É≥„Éâ„É©„Éº
        socket.on('connect', () => {
            console.log('‚úÖ WebSocketÊé•Á∂öÊàêÂäü');
            updateConnectionStatus(true);
        });

        socket.on('disconnect', () => {
            console.log('‚ùå WebSocketÊé•Á∂öÂàáÊñ≠');
            updateConnectionStatus(false);
        });

        socket.on('data_update', (data) => {
            console.log('üìä „Éá„Éº„ÇøÊõ¥Êñ∞Âèó‰ø°:', data);
            latestData = data;
            updateDashboard(data);
            updateLastUpdate();
        });

        // Êé•Á∂öÁä∂ÊÖãÊõ¥Êñ∞
        function updateConnectionStatus(connected) {
            const statusDot = document.getElementById('connection-status');
            if (connected) {
                statusDot.classList.remove('offline');
            } else {
                statusDot.classList.add('offline');
            }
        }

        // „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÊõ¥Êñ∞
        function updateDashboard(data) {
            if (!data || !data.nodes) return;

            // „ÇØ„É©„Çπ„Çø„ÉºÊ¶ÇË¶ÅÊõ¥Êñ∞
            document.getElementById('total-nodes').textContent = data.nodes.length;
            document.getElementById('total-vms').textContent = data.vms ? data.vms.length : 0;
            
            const runningVMs = data.vms ? data.vms.filter(vm => vm.status === 'running').length : 0;
            document.getElementById('running-vms').textContent = runningVMs;

            // „Éé„Éº„ÉâË°®Á§∫Êõ¥Êñ∞
            updateNodesDisplay(data.nodes);

            // VM/„Ç≥„É≥„ÉÜ„ÉäË°®Á§∫Êõ¥Êñ∞
            updateVMsDisplay(data.vms || []);

            // „É™„ÇΩ„Éº„Çπ„ÉÅ„É£„Éº„ÉàÊõ¥Êñ∞
            updateResourceChart(data);
        }

        // „Éé„Éº„ÉâË°®Á§∫Êõ¥Êñ∞
        function updateNodesDisplay(nodes) {
            const container = document.getElementById('nodes-container');
            container.innerHTML = '';

            nodes.forEach(node => {
                const nodeDiv = document.createElement('div');
                nodeDiv.className = `node-card ${node.status !== 'online' ? 'offline' : ''}`;

                const cpuPercent = node.cpu.toFixed(1);
                const memoryPercent = ((node.memory_used / node.memory_total) * 100).toFixed(1);

                nodeDiv.innerHTML = `
                    <div class="node-header">
                        <div class="node-name">${node.name}</div>
                        <div class="node-status ${node.status !== 'online' ? 'offline' : ''}"></div>
                    </div>
                    <div class="node-metrics">
                        <div class="progress-item">
                            <span>CPU: ${cpuPercent}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${cpuPercent}%"></div>
                        </div>
                        <div class="progress-item">
                            <span>Memory: ${memoryPercent}%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${memoryPercent}%"></div>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #cbd5e1;">
                            Uptime: ${formatUptime(node.uptime)}
                        </div>
                    </div>
                `;

                container.appendChild(nodeDiv);
            });
        }

        // VM/„Ç≥„É≥„ÉÜ„ÉäË°®Á§∫Êõ¥Êñ∞
        function updateVMsDisplay(vms) {
            const container = document.getElementById('vms-container');
            container.innerHTML = '';

            if (vms.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #cbd5e1;">VM/„Ç≥„É≥„ÉÜ„Éä„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</p>';
                return;
            }

            vms.forEach(vm => {
                const vmDiv = document.createElement('div');
                vmDiv.className = `vm-item ${vm.status}`;

                vmDiv.innerHTML = `
                    <div class="vm-info">
                        <h4>${vm.name}</h4>
                        <div class="vm-details">
                            ${vm.type.toUpperCase()} ID: ${vm.id} | Node: ${vm.node}
                        </div>
                    </div>
                    <div class="vm-status ${vm.status}">
                        ${vm.status}
                    </div>
                `;

                container.appendChild(vmDiv);
            });
        }

        // „É™„ÇΩ„Éº„Çπ„ÉÅ„É£„Éº„ÉàÊõ¥Êñ∞
        function updateResourceChart(data) {
            const ctx = document.getElementById('resource-chart').getContext('2d');

            if (resourceChart) {
                resourceChart.destroy();
            }

            const nodes = data.nodes || [];
            if (nodes.length === 0) return;

            // Âπ≥Âùá‰ΩøÁî®ÁéáË®àÁÆó
            const avgCPU = nodes.reduce((sum, node) => sum + node.cpu, 0) / nodes.length;
            const avgMemory = nodes.reduce((sum, node) => sum + ((node.memory_used / node.memory_total) * 100), 0) / nodes.length;

            resourceChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['CPU‰ΩøÁî®Áéá', 'Memory‰ΩøÁî®Áéá', 'Á©∫„ÅçÂÆπÈáè'],
                    datasets: [{
                        data: [avgCPU, avgMemory, 100 - ((avgCPU + avgMemory) / 2)],
                        backgroundColor: ['#ef4444', '#f59e0b', '#10b981'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#ffffff',
                                font: { size: 12 },
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Â±•Ê≠¥„ÉÅ„É£„Éº„ÉàË™≠„ÅøËæº„Åø
        async function loadHistoryChart() {
            try {
                const response = await fetch('/api/history');
                const result = await response.json();

                if (result.success && result.data.length > 0) {
                    updateHistoryChart(result.data);
                }
            } catch (error) {
                console.error('Â±•Ê≠¥„Éá„Éº„ÇøÂèñÂæó„Ç®„É©„Éº:', error);
            }
        }

        // Â±•Ê≠¥„ÉÅ„É£„Éº„ÉàÊõ¥Êñ∞
        function updateHistoryChart(historyData) {
            const ctx = document.getElementById('history-chart').getContext('2d');

            if (historyChart) {
                historyChart.destroy();
            }

            const labels = historyData.map(item => {
                const date = new Date(item.time);
                return date.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
            });

            const cpuData = historyData.map(item => item.cpu);
            const memoryData = historyData.map(item => item.memory);

            historyChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'CPU‰ΩøÁî®Áéá (%)',
                            data: cpuData,
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Memory‰ΩøÁî®Áéá (%)',
                            data: memoryData,
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#ffffff' }
                        },
                        x: {
                            grid: { color: 'rgba(255, 255, 255, 0.1)' },
                            ticks: { color: '#ffffff' }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: { color: '#ffffff' }
                        }
                    }
                }
            });
        }

        // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
        function formatUptime(seconds) {
            if (!seconds || seconds === 0) return 'N/A';

            const days = Math.floor(seconds / 86400);
            const hours = Math.floor((seconds % 86400) / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);

            if (days > 0) {
                return `${days}Êó• ${hours}ÊôÇÈñì`;
            } else if (hours > 0) {
                return `${hours}ÊôÇÈñì ${minutes}ÂàÜ`;
            } else {
                return `${minutes}ÂàÜ`;
            }
        }

        function updateLastUpdate() {
            const now = new Date();
            document.getElementById('last-update').textContent = now.toLocaleString('ja-JP');
        }

        // ÊâãÂãï„Éá„Éº„ÇøÊõ¥Êñ∞
        async function refreshData() {
            try {
                const response = await fetch('/api/status');
                const result = await response.json();

                if (result.success) {
                    updateDashboard(result.data);
                    updateLastUpdate();
                    console.log('‚úÖ „Éá„Éº„ÇøÊâãÂãïÊõ¥Êñ∞ÂÆå‰∫Ü');
                }
            } catch (error) {
                console.error('‚ùå „Éá„Éº„ÇøÊõ¥Êñ∞„Ç®„É©„Éº:', error);
            }
        }

        // ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÂàùÊúüÂåñÈñãÂßã');

            // ÂàùÊúü„Éá„Éº„ÇøÂèñÂæó
            refreshData();

            // Â±•Ê≠¥„ÉÅ„É£„Éº„ÉàË™≠„ÅøËæº„Åø
            setTimeout(loadHistoryChart, 1000);

            // ÂÆöÊúüÁöÑ„Å™Â±•Ê≠¥Êõ¥Êñ∞Ôºà1ÂàÜ„Åî„Å®Ôºâ
            setInterval(loadHistoryChart, 60000);

            console.log('‚úÖ „ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÂàùÊúüÂåñÂÆå‰∫Ü');
        });
    </script>
</body>
</html>
